安装zookeeper

1、首先肯定是从官网下载相应的tar包，并解压

　　网址：http://zookeeper.apache.org/releases.html#download 截至到我发表该文章的时候，应尽出现了3.5.0的版本了。

2、拷贝安装包到本机环境，并解压

	cp /home/master007/Desktop/share/5-分布式软件/zookeeper-3.5.3-beta.tar.gz /usr/master/d_data/softs/zookeeper-3.5.3-beta.tar.gz
	cp /home/master007/Desktop/share/5-分布式软件/zookeeper-3.5.3-beta.tar.gz /usr/master/a_run/d_service/zookeeper/zookeeper-3.5.3-beta.tar.gz

	cp /home/slave001/Desktop/share/5-分布式软件/zookeeper-3.5.3-beta.tar.gz /usr/slave/d_data/softs/zookeeper-3.5.3-beta.tar.gz
	cp /home/slave001/Desktop/share/5-分布式软件/zookeeper-3.5.3-beta.tar.gz /usr/slave/a_run/d_service/zookeeper/zookeeper-3.5.3-beta.tar.gz

　　解压：tar -xvf zookeeper-3.5.3-beta.tar.gz
	mv zookeeper-3.5.3-beta zookeeper3.5.3

3、添加环境变量

　　export ZOOKEEPER_HOME=/usr/slave/a_run/d_service/zookeeper/zookeeper3.5.3
　　export PATH=$PATH:$ZOOKEEPER_HOME/bin

4、修改配置文件

　　cd  /usr/slave/a_run/d_service/zookeeper/zookeeper3.5.3/conf ，将zoo_sample.cfg复制为zoo.cfg，并修改zoo.cfg的内容如下：
	cp zoo_sample.cfg zoo.cfg
	vi zoo.cfg

	修改其中内容：
	dataDir=/usr/master/a_run/d_service/zookeeper/zookeeper3.5.3/zkdata
	dataLogDir=/usr/master/a_run/d_service/zookeeper/zookeeper3.5.3/zkdatalog

	dataDir=/usr/slave/a_run/d_service/zookeeper/zookeeper3.5.3/zkdata
	dataLogDir=/usr/slave/a_run/d_service/zookeeper/zookeeper3.5.3/zkdatalog

	server.1=hadoop1:2888:3888
	server.2=hadoop2:2888:3888
	server.3=hadoop3:2888:3888

注意，上面的配置路径下的文件夹必须是存在的。

5、启动zkServer

在各节点上执行：zkServer.sh start  并通过jps可以看到：启动了QuorumpeerMain进程。



6、此时可以通过zkServer.sh  status 命令来查看节点的启动状态。

这里需要注意点，只有当至少启动了三个节点之后，该命令才会产生结果。否则会显示：zookeeper Error contacting service. It is probably not running错误

当你启动了至少三个节点之后，执行该命令可以看到：　　



至此，zookeeper的安装工作结束。

7、关闭zookeeper服务

　　zkServer.sh stop  关闭

　　zkServer.sh restart  重启