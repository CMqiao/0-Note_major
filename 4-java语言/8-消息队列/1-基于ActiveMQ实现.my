<h1><span style="font-size:12px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><a href="http://elim.iteye.com/blog/1893038" style="color:#7d0000; text-decoration:underline">Spring整合JMS(一)&mdash;&mdash;基于ActiveMQ实现</a></span></span></h1>

<div class="blog_content" id="blog_content" style="-webkit-text-stroke-width:0px; text-align:left">
<div class="iteye-blog-content-contain">
<h2 style="margin-left:28.8pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:x-large"><span style="font-family:Cambria">1.1</span></span>&nbsp;<span style="font-size:x-large"><span style="font-family:Cambria">JMS</span></span><span style="font-size:x-large"><span style="font-family:宋体">简介</span></span></span></span></span></h2>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JMS</span><span style="font-family:宋体">的全称是</span><span style="font-family:Calibri">Java Message Service</span><span style="font-family:宋体">，即</span><span style="font-family:Calibri">Java</span><span style="font-family:宋体">消息服务。它主要用于在生产者和消费者之间进行消息传递，生产者负责产生消息，而消费者负责接收消息。把它应用到实际的业务需求中的话我们可以在特定的时候利用生产者生成一消息，并进行发送，对应的消费者在接收到对应的消息后去完成对应的业务逻辑。对于消息的传递有两种类型，一种是点对点的，即一个生产者和一个消费者一一对应；另一种是发布</span><span style="font-family:Calibri">/</span><span style="font-family:宋体">订阅模式，即一个生产者产生消息并进行发送后，可以由多个消费者进行接收。</span></span></span></span></span></p>

<h2 style="margin-left:28.8pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:x-large"><span style="font-family:Cambria">1.2</span></span>&nbsp;<span style="font-size:x-large"><span style="font-family:Cambria">Spring</span></span><span style="font-size:x-large"><span style="font-family:宋体">整合</span><span style="font-family:Cambria">JMS</span></span></span></span></span></h2>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">对</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">做了一个简要介绍之后，接下来就讲一下</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">整合</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">的具体过程。</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">只是一个标准，真正在使用它的时候我们需要有它的具体实现，这里我们就使用</span><span style="font-family:Calibri">Apache</span><span style="font-family:宋体">的</span><span style="font-family:Calibri">activeMQ</span><span style="font-family:宋体">来作为它的实现。所使用的依赖利用</span><span style="font-family:Calibri">Maven</span><span style="font-family:宋体">来进行管理，具体依赖如下：</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm">&nbsp;</p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>dependencies</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>junit<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>junit<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>4.10<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>scope</strong><strong>&gt;</strong>test<strong>&lt;/</strong><strong>scope</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>org.springframework<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>spring-context<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>${spring-version}<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>org.springframework<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>spring-jms<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>${spring-version}<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>org.springframework<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>spring-test<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>${spring-version}<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>javax.annotation<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>jsr250-api<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>1.0<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>groupId</strong><strong>&gt;</strong>org.apache.activemq<strong>&lt;/</strong><strong>groupId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>artifactId</strong><strong>&gt;</strong>activemq-core<strong>&lt;/</strong><strong>artifactId</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>version</strong><strong>&gt;</strong>5.7.0<strong>&lt;/</strong><strong>version</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>dependency</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>dependencies</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<h3 style="margin-left:36pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><a name="_Toc359768037"></a>1.2.1&nbsp;activeMQ准备</span></span></span></h3>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">既然是使用的</span><span style="font-family:Calibri">apache</span><span style="font-family:宋体">的</span><span style="font-family:Calibri">activeMQ</span><span style="font-family:宋体">作为</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">的实现，那么首先我们应该到</span><span style="font-family:Calibri">apache</span><span style="font-family:宋体">官网上下载</span><span style="font-family:Calibri">activeMQ</span><span style="font-family:宋体">（</span><a href="http://activemq.apache.org/download.html" style="color:#7d0000; text-decoration:underline"><u><span style="font-family:Calibri">http://activemq.apache.org/download.html</span></u></a><span style="font-family:宋体">），进行解压后运行其</span><span style="font-family:Calibri">bin</span><span style="font-family:宋体">目录下面的</span><span style="font-family:Calibri">activemq.bat</span><span style="font-family:宋体">文件启动</span><span style="font-family:Calibri">activeMQ</span><span style="font-family:宋体">。</span></span></span></span></span></p>

<h3 style="margin-left:36pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><a name="_Toc359768038"></a>1.2.2 配置ConnectionFactory</span></span></span></h3>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConnectionFactory</span><span style="font-family:宋体">是用于产生到</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器的链接的，</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">为我们提供了多个</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">，有</span><span style="font-family:Calibri">SingleConnectionFactory</span><span style="font-family:宋体">和</span><span style="font-family:Calibri">CachingConnectionFactory</span><span style="font-family:宋体">。</span><span style="font-family:Calibri">SingleConnectionFactory</span><span style="font-family:宋体">对于建立</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器链接的请求会一直返回同一个链接，并且会忽略</span><span style="font-family:Calibri">Connection</span><span style="font-family:宋体">的</span><span style="font-family:Calibri">close</span><span style="font-family:宋体">方法调用。</span><span style="font-family:Calibri">CachingConnectionFactory</span><span style="font-family:宋体">继承了</span><span style="font-family:Calibri">SingleConnectionFactory</span><span style="font-family:宋体">，所以它拥有</span><span style="font-family:Calibri">SingleConnectionFactory</span><span style="font-family:宋体">的所有功能，同时它还新增了缓存功能，它可以缓存</span><span style="font-family:Calibri">Session</span><span style="font-family:宋体">、</span><span style="font-family:Calibri">MessageProducer</span><span style="font-family:宋体">和</span><span style="font-family:Calibri">MessageConsumer</span><span style="font-family:宋体">。这里我们使用</span><span style="font-family:Calibri">SingleConnectionFactory</span><span style="font-family:宋体">来作为示例。</span></span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;connectionFactory&quot;&nbsp;class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">这样就定义好产生</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器链接的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">了吗？答案是非也。</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">提供的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">只是</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">用于管理</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">的，真正产生到</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器链接的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">还得是由</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务厂商提供，并且需要把它注入到</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">提供的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">中。我们这里使用的是</span><span style="font-family:Calibri">ActiveMQ</span><span style="font-family:宋体">实现的</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">，所以在我们这里真正的可以产生</span><span style="font-family:Calibri">Connection</span><span style="font-family:宋体">的就应该是由</span><span style="font-family:Calibri">ActiveMQ</span><span style="font-family:宋体">提供的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">。所以定义一个</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">的完整代码应该如下所示：</span></span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;真正可以产生Connection的ConnectionFactory，由对应的&nbsp;JMS服务厂商提供--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;targetConnectionFactory&quot;&nbsp;class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;brokerURL&quot;&nbsp;value=&quot;tcp://localhost:61616&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;Spring用于管理真正的ConnectionFactory的ConnectionFactory&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;connectionFactory&quot;&nbsp;class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;目标ConnectionFactory对应真实的可以产生JMS&nbsp;Connection的ConnectionFactory&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;targetConnectionFactory&quot;&nbsp;ref=&quot;targetConnectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:Calibri">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ActiveMQ</span><span style="font-family:宋体">为我们提供了一个</span><span style="font-family:Calibri">PooledConnectionFactory</span><span style="font-family:宋体">，通过往里面注入一个</span><span style="font-family:Calibri">ActiveMQConnectionFactory</span><span style="font-family:宋体">可以用来将</span><span style="font-family:Calibri">Connection</span><span style="font-family:宋体">、</span><span style="font-family:Calibri">Session</span><span style="font-family:宋体">和</span><span style="font-family:Calibri">MessageProducer</span><span style="font-family:宋体">池化，这样可以大大的减少我们的资源消耗。当使用</span><span style="font-family:Calibri">PooledConnectionFactory</span><span style="font-family:宋体">时，我们在定义一个</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">时应该是如下定义：</span></span></span></span></span></p>

<p><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px">&nbsp;</span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;真正可以产生Connection的ConnectionFactory，由对应的&nbsp;JMS服务厂商提供--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;targetConnectionFactory&quot;&nbsp;class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;brokerURL&quot;&nbsp;value=&quot;tcp://localhost:61616&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;pooledConnectionFactory&quot;&nbsp;class=&quot;org.apache.activemq.pool.PooledConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;connectionFactory&quot;&nbsp;ref=&quot;targetConnectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;maxConnections&quot;&nbsp;value=&quot;10&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;connectionFactory&quot;&nbsp;class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;targetConnectionFactory&quot;&nbsp;ref=&quot;pooledConnectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<h3 style="margin-left:36pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><a name="_Toc359768039"></a>1.2.3 配置生产者</span></span></span></h3>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:宋体">配置好</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">之后我们就需要配置生产者。生产者负责产生消息并发送到</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器，这通常对应的是我们的一个业务逻辑服务实现类。但是我们的服务实现类是怎么进行消息的发送的呢？这通常是利用</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">为我们提供的</span><span style="font-family:Calibri">JmsTemplate</span><span style="font-family:宋体">类来实现的，所以配置生产者其实最核心的就是配置进行消息发送的</span><span style="font-family:Calibri">JmsTemplate</span><span style="font-family:宋体">。对于消息发送者而言，它在发送消息的时候要知道自己该往哪里发，为此，我们在定义</span><span style="font-family:Calibri">JmsTemplate</span><span style="font-family:宋体">的时候需要往里面注入一个</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">提供的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">对象。</span></span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;Spring提供的JMS工具类，它可以进行消息发送、接收等&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;jmsTemplate&quot;&nbsp;class=&quot;org.springframework.jms.core.JmsTemplate&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;这个connectionFactory对应的是我们定义的Spring提供的那个ConnectionFactory对象&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;connectionFactory&quot;&nbsp;ref=&quot;connectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">在真正利用</span><span style="font-family:Calibri">JmsTemplate</span><span style="font-family:宋体">进行消息发送的时候，我们需要知道消息发送的目的地，即</span><span style="font-family:Calibri">destination</span><span style="font-family:宋体">。在</span><span style="font-family:Calibri">Jms</span><span style="font-family:宋体">中有一个用来表示目的地的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">接口，它里面没有任何方法定义，只是用来做一个标识而已。当我们在使用</span><span style="font-family:Calibri">JmsTemplate</span><span style="font-family:宋体">进行消息发送时没有指定</span><span style="font-family:Calibri">destination</span><span style="font-family:宋体">的时候将使用默认的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">。默认</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">可以通过在定义</span><span style="font-family:Calibri">jmsTemplate bean</span><span style="font-family:宋体">对象时通过属性</span><span style="font-family:Calibri">defaultDestination</span><span style="font-family:宋体">或</span><span style="font-family:Calibri">defaultDestinationName</span><span style="font-family:宋体">来进行注入，</span><span style="font-family:Calibri">defaultDestinationName</span><span style="font-family:宋体">对应的就是一个普通字符串。在</span><span style="font-family:Calibri">ActiveMQ</span><span style="font-family:宋体">中实现了两种类型的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">，一个是点对点的</span><span style="font-family:Calibri">ActiveMQQueue</span><span style="font-family:宋体">，另一个就是支持订阅</span><span style="font-family:Calibri">/</span><span style="font-family:宋体">发布模式的</span><span style="font-family:Calibri">ActiveMQTopic</span><span style="font-family:宋体">。在定义这两种类型的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">时我们都可以通过一个</span><span style="font-family:Calibri">name</span><span style="font-family:宋体">属性来进行构造，如：</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--这个是队列目的地，点对点的--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;queueDestination&quot;&nbsp;class=&quot;org.apache.activemq.command.ActiveMQQueue&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>value</strong><strong>&gt;</strong>queue<strong>&lt;/</strong><strong>value</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--这个是主题目的地，一对多的--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;topicDestination&quot;&nbsp;class=&quot;org.apache.activemq.command.ActiveMQTopic&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>constructor-arg</strong>&nbsp;value=&quot;topic&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">假设我们定义了一个</span><span style="font-family:Calibri">ProducerService</span><span style="font-family:宋体">，里面有一个向</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">发送纯文本消息的方法</span><span style="font-family:Calibri">sendMessage</span><span style="font-family:宋体">，那么我们的代码就大概是这个样子：</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Java代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>package</strong>&nbsp;com.tiantian.springintejms.service.impl;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.annotation.Resource;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.Destination;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.JMSException;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.Message;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.Session;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.jms.core.JmsTemplate;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.jms.core.MessageCreator;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.stereotype.Component;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;com.tiantian.springintejms.service.ProducerService;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">@Component&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>public</strong>&nbsp;<strong>class</strong>&nbsp;ProducerServiceImpl&nbsp;<strong>implements</strong>&nbsp;ProducerService&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>private</strong>&nbsp;JmsTemplate&nbsp;jmsTemplate;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;<strong>void</strong>&nbsp;sendMessage(Destination&nbsp;destination,&nbsp;<strong>final</strong>&nbsp;String&nbsp;message)&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;---------------生产者发送消息-----------------&quot;);&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;---------------生产者发了一个消息：&quot;&nbsp;+&nbsp;message);&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jmsTemplate.send(destination,&nbsp;<strong>new</strong>&nbsp;MessageCreator()&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;Message&nbsp;createMessage(Session&nbsp;session)&nbsp;<strong>throws</strong>&nbsp;JMSException&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>return</strong>&nbsp;session.createTextMessage(message);&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;JmsTemplate&nbsp;getJmsTemplate()&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;returnjmsTemplate;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;@Resource&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;<strong>void</strong>&nbsp;setJmsTemplate(JmsTemplate&nbsp;jmsTemplate)&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>this</strong>.jmsTemplate&nbsp;=&nbsp;jmsTemplate;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">}&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">我们可以看到在</span><span style="font-family:Calibri">sendMessage</span><span style="font-family:宋体">方法体里面我们是通过</span><span style="font-family:Calibri">jmsTemplate</span><span style="font-family:宋体">来发送消息到对应的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">的。到此，我们生成一个简单的文本消息并把它发送到指定目的地</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">的生产者就配置好了。</span></span></span></span></span></p>

<h3 style="margin-left:36pt; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><a name="_Toc359768040"></a>1.2.4 配置消费者</span></span></span></h3>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:宋体">生产者往指定目的地</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">发送消息后，接下来就是消费者对指定目的地的消息进行消费了。那么消费者是如何知道有生产者发送消息到指定目的地</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">了呢？这是通过</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">为我们封装的消息监听容器</span><span style="font-family:Calibri">MessageListenerContainer</span><span style="font-family:宋体">实现的，它负责接收信息，并把接收到的信息分发给真正的</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">进行处理。每个消费者对应每个目的地都需要有对应的</span><span style="font-family:Calibri">MessageListenerContainer</span><span style="font-family:宋体">。对于消息监听容器而言，除了要知道监听哪个目的地之外，还需要知道到哪里去监听，也就是说它还需要知道去监听哪个</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">服务器，这是通过在配置</span><span style="font-family:Calibri">MessageConnectionFactory</span><span style="font-family:宋体">的时候往里面注入一个</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">来实现的。所以我们在配置一个</span><span style="font-family:Calibri">MessageListenerContainer</span><span style="font-family:宋体">的时候有三个属性必须指定，一个是表示从哪里监听的</span><span style="font-family:Calibri">ConnectionFactory</span><span style="font-family:宋体">；一个是表示监听什么的</span><span style="font-family:Calibri">Destination</span><span style="font-family:宋体">；一个是接收到消息以后进行消息处理的</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">。</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">一共为我们提供了两种类型的</span><span style="font-family:Calibri">MessageListenerContainer</span><span style="font-family:宋体">，</span><span style="font-family:Calibri">SimpleMessageListenerContainer</span><span style="font-family:宋体">和</span><span style="font-family:Calibri">DefaultMessageListenerContainer</span><span style="font-family:宋体">。</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:Calibri">SimpleMessageListenerContainer</span><span style="font-family:宋体">会在一开始的时候就创建一个会话</span><span style="font-family:Calibri">session</span><span style="font-family:宋体">和消费者</span><span style="font-family:Calibri">Consumer</span><span style="font-family:宋体">，并且会使用标准的</span><span style="font-family:Calibri">JMS MessageConsumer.setMessageListener()</span><span style="font-family:宋体">方法注册监听器让</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">提供者调用监听器的回调函数。它不会动态的适应运行时需要和参与外部的事务管理。兼容性方面，它非常接近于独立的</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">规范，但一般不兼容</span><span style="font-family:Calibri">Java EE</span><span style="font-family:宋体">的</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">限制。</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium"><span style="font-family:宋体">大多数情况下我们还是使用的</span><span style="font-family:Calibri">DefaultMessageListenerContainer</span><span style="font-family:宋体">，跟</span><span style="font-family:Calibri">SimpleMessageListenerContainer</span><span style="font-family:宋体">相比，</span><span style="font-family:Calibri">DefaultMessageListenerContainer</span><span style="font-family:宋体">会动态的适应运行时需要，并且能够参与外部的事务管理。它很好的平衡了对</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">提供者要求低、先进功能如事务参与和兼容</span><span style="font-family:Calibri">Java EE</span><span style="font-family:宋体">环境。</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><strong><span style="font-size:14pt"><span style="font-family:宋体">定义处理消息的</span></span></strong><strong><span style="font-size:14pt"><span style="font-family:Calibri">MessageListener</span></span></strong></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">要定义处理消息的</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">我们只需要实现</span><span style="font-family:Calibri">JMS</span><span style="font-family:宋体">规范中的</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">接口就可以了。</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">接口中只有一个方法</span><span style="font-family:Calibri">onMessage</span><span style="font-family:宋体">方法，当接收到消息的时候会自动调用该方法。</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Java代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>package</strong>&nbsp;com.tiantian.springintejms.listener;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.JMSException;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.Message;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.MessageListener;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.TextMessage;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>public</strong>&nbsp;<strong>class</strong>&nbsp;ConsumerMessageListener&nbsp;<strong>implements</strong>&nbsp;MessageListener&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;<strong>void</strong>&nbsp;onMessage(Message&nbsp;message)&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//这里我们知道生产者发送的就是一个纯文本消息，所以这里可以直接进行强制转换&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TextMessage&nbsp;textMsg&nbsp;=&nbsp;(TextMessage)&nbsp;message;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;接收到一个纯文本消息。&quot;);&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>try</strong>&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&quot;消息内容是：&quot;&nbsp;+&nbsp;textMsg.getText());&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<strong>catch</strong>&nbsp;(JMSException&nbsp;e)&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">}&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">有了</span><span style="font-family:Calibri">MessageListener</span><span style="font-family:宋体">之后我们就可以在</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">的配置文件中配置一个消息监听容器了。</span></span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--这个是队列目的地--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;queueDestination&quot;&nbsp;class=&quot;org.apache.activemq.command.ActiveMQQueue&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>value</strong><strong>&gt;</strong>queue<strong>&lt;/</strong><strong>value</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;消息监听器&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;consumerMessageListener&quot;&nbsp;class=&quot;com.tiantian.springintejms.listener.ConsumerMessageListener&quot;<strong>/&gt;</strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&lt;!--&nbsp;消息监听容器&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;jmsContainer&quot;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;connectionFactory&quot;&nbsp;ref=&quot;connectionFactory&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;destination&quot;&nbsp;ref=&quot;queueDestination&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;messageListener&quot;&nbsp;ref=&quot;consumerMessageListener&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">我们可以看到我们定义了一个名叫</span><span style="font-family:Calibri">queue</span><span style="font-family:宋体">的</span><span style="font-family:Calibri">ActiveMQQueue</span><span style="font-family:宋体">目的地，我们的监听器就是监听了发送到这个目的地的消息。</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">至此我们的生成者和消费者都配置完成了，这也就意味着我们的整合已经完成了。这个时候完整的</span><span style="font-family:Calibri">Spring</span><span style="font-family:宋体">的配置文件应该是这样的：</span></span></span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Xml代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;?</strong><strong>xml</strong>&nbsp;version=&quot;1.0&quot;&nbsp;encoding=&quot;UTF-8&quot;<strong>?&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;</strong><strong>beans</strong>&nbsp;xmlns=&quot;http://www.springframework.org/schema/beans&quot;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&nbsp;xmlns:context=&quot;http://www.springframework.org/schema/context&quot;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;xmlns:jms=&quot;http://www.springframework.org/schema/jms&quot;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/context/spring-context-3.0.xsd&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/beans&nbsp;http://www.springframework.org/schema/beans/spring-beans-3.0.xsd&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;http://www.springframework.org/schema/jms&nbsp;http://www.springframework.org/schema/jms/spring-jms-3.0.xsd&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>context:component-scan</strong>&nbsp;base-package=&quot;com.tiantian&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Spring提供的JMS工具类，它可以进行消息发送、接收等&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;jmsTemplate&quot;&nbsp;class=&quot;org.springframework.jms.core.JmsTemplate&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;这个connectionFactory对应的是我们定义的Spring提供的那个ConnectionFactory对象&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;connectionFactory&quot;&nbsp;ref=&quot;connectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;真正可以产生Connection的ConnectionFactory，由对应的&nbsp;JMS服务厂商提供--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;targetConnectionFactory&quot;&nbsp;class=&quot;org.apache.activemq.ActiveMQConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;brokerURL&quot;&nbsp;value=&quot;tcp://localhost:61616&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;Spring用于管理真正的ConnectionFactory的ConnectionFactory&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;connectionFactory&quot;&nbsp;class=&quot;org.springframework.jms.connection.SingleConnectionFactory&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;目标ConnectionFactory对应真实的可以产生JMS&nbsp;Connection的ConnectionFactory&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;targetConnectionFactory&quot;&nbsp;ref=&quot;targetConnectionFactory&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--这个是队列目的地--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;queueDestination&quot;&nbsp;class=&quot;org.apache.activemq.command.ActiveMQQueue&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>value</strong><strong>&gt;</strong>queue<strong>&lt;/</strong><strong>value</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>constructor-arg</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;消息监听器&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;consumerMessageListener&quot;&nbsp;class=&quot;com.tiantian.springintejms.listener.ConsumerMessageListener&quot;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--&nbsp;消息监听容器&nbsp;--&gt;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>bean</strong>&nbsp;id=&quot;jmsContainer&quot;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class=&quot;org.springframework.jms.listener.DefaultMessageListenerContainer&quot;<strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;connectionFactory&quot;&nbsp;ref=&quot;connectionFactory&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;destination&quot;&nbsp;ref=&quot;queueDestination&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;</strong><strong>property</strong>&nbsp;name=&quot;messageListener&quot;&nbsp;ref=&quot;consumerMessageListener&quot;&nbsp;<strong>/&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>&lt;/</strong><strong>bean</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>&lt;/</strong><strong>beans</strong><strong>&gt;</strong>&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">接着我们来测试一下，看看我们的整合是否真的成功了，测试代码如下：</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<div class="iteye-blog-content-contain">
<div class="dp-highlighter" id="" style="margin-left:9px; padding:1px; width:679px">
<div class="bar">
<div class="tools" style="padding:3px; text-align:left"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>Java代码&nbsp;<embed allowscriptaccess="always" height="15" pluginspage="http://www.macromedia.com/go/getflashplayer" quality="high" src="http://elim.iteye.com/javascripts/syntaxhighlighter/clipboard_new.swf" type="application/x-shockwave-flash" width="14" wmode="transparent"></embed>&nbsp;<a href="javascript:void()" onclick="code_favorites_do_favorite(this);return false;" style="color:#7d0000; text-decoration:underline" title="收藏这段代码"><img alt="收藏代码" class="star" src="http://elim.iteye.com/images/icon_star.png" style="border:0px" /></a></strong></span></span></span></span></span></span></div>
</div>

<ol start="1" style="margin-left:0px; margin-right:0px">
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>package</strong>&nbsp;com.tiantian.springintejms.test;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;javax.jms.Destination;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.junit.Test;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.junit.runner.RunWith;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.beans.factory.annotation.Autowired;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.beans.factory.annotation.Qualifier;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.test.context.ContextConfiguration;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;org.springframework.test.context.junit4.SpringJUnit4ClassRunner;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>import</strong>&nbsp;com.tiantian.springintejms.service.ProducerService;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">@RunWith(SpringJUnit4ClassRunner.<strong>class</strong>)&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">@ContextConfiguration(&quot;/applicationContext.xml&quot;)&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace"><strong>public</strong>&nbsp;<strong>class</strong>&nbsp;ProducerConsumerTest&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>private</strong>&nbsp;ProducerService&nbsp;producerService;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;@Autowired&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;@Qualifier(&quot;queueDestination&quot;)&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>private</strong>&nbsp;Destination&nbsp;destination;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;@Test&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;<strong>public</strong>&nbsp;<strong>void</strong>&nbsp;testSend()&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<strong>for</strong>&nbsp;(<strong>int</strong>&nbsp;i=0;&nbsp;i&lt;2;&nbsp;i++)&nbsp;{&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;producerService.sendMessage(destination,&nbsp;&quot;你好，生产者！这是消息：&quot;&nbsp;+&nbsp;(i+1));&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></span></span></span></span></span></li>
	<li><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:14px"><span style="font-size:12px"><span style="font-family:Monaco,'DejaVu Sans Mono','Bitstream Vera Sans Mono',Consolas,'Courier New',monospace">}&nbsp;&nbsp;</span></span></span></span></span></span></li>
</ol>
</div>
</div>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">在上面的测试代码中我们利用生产者发送了两个消息，正常来说，消费者应该可以接收到这两个消息。运行测试代码后控制台输出如下：</span></span></span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px">&nbsp;<br />
<img alt="" src="http://dl2.iteye.com/upload/attachment/0086/1032/bc449d33-84f8-3742-bca5-0251132e810f.png" style="border:0px" /><br />
&nbsp;</span></span></span></p>

<p style="margin-left:0cm; margin-right:0cm"><span style="font-size:14px"><span style="font-family:Helvetica,Tahoma,Arial,sans-serif"><span style="font-size:14px"><span style="font-size:medium">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="font-family:宋体">看，控制台已经进行了正确的输出，这说明我们的整合确实是已经成功了。</span></span></span></span></span></p>
</div>
</div>
